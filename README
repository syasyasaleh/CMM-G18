This file explains how our code files work, what they compute, and how they integrate together.

# File Structure
- Main Code - Stability.py: This main code will import and take values from the other 4 mini modules listed below.
    This code runs the simulation loops, finds the roots, and solves the ODE, plotting all final results regarding stability.
    The following 4 mini-modules are not required to be run seperately, the 'Main Code - Stability' runs the functions from them.
    - Hydrodynamics.py: this covers the hydrodyanmics of the system. It covers hydrostatic stiffness interpolation and damping calculations.
    - MMI.py: This solve the entire moment of inertia of the system.
    - Tower_mmi_CM.py: This seperate MMI code calculates using numerical integration i.e. Trapezoidal Rule, the towers centre of mass and inertia using the raw tower denisty data per blade length from our reference.
    - Stability.py: This contains the ODE definition of our system for the main stability code to call to. 

- Power:
- Main_Power_Analysis.py: This single script contains all the components to generate the turbine power curve, apply aerodynamic and pitch-angle corrections, compute the Annual Energy Production (AEP), and produce all wanted plots, in 6 sections:
    - Wind distribution: Defines the Weibull wind-speed model and calculates the number of annual hours at each wind speed.
    - Spline interpolation model: Performs a non-linear spline interpolation of the NREL 5MW power curve data, producing a smooth function for P(v)
    - Aerodynamic Cp model: Applys the aerodynamic Cp formula and uses the effect on gearbox and ghenerator efficiency.
    - Power-Curve generation: Combines the spline interpolation and corrections to generate complete power curves.
    - Annual-Energy Production: Numerically integrates the power curve with the Weibull wind distribution to compute the annual energy output in MWh/yr.
    - Main analysis and plotting: Outputs the AEP table and plots for all sections. 

# How to run the code
You will only need to run two files: 'Main Stability - Code.py' and 'Main_Power_Analysis.py'.

## Stability Code
1. Ensure that all the files listed above in File Structure are downloaded inside the same directory as they relate to each other.
   You will also need the following libraries installed: 'numpy', 'scipy', 'matplotlib'.

2. Open 'Main Code - Stability.py' and run the file.

3. The console will output the iteration logs (e.g. "Root Finder Guess: L=...") and it's corresponding ODE solution.

4. This will also output Figure 8 - the plot of Stability vs Blade Length which highlights the max blade length to keep the pitch motion within 10 degrees.
   
## Power Code
1. Run the 'Main_Power_Analysis.py' file to display all plots and print to console the AEP table for multiple blade lengths.

2. This will display the plots: Figure 2, Figure 5 and Figure 6  and print the AEP table for multiple blade lengths.

# Implementation of Numerical Methods
- Root Finding
  This section is found within 'Main Code - Stabilty.py' (Lines 101-163).
  It uses 'find_root_by_false_position'.
  This is a slightly modified version of the Regula Falsi method to solve $f(L) = \theta_{max} - 10^\circ = 0$.

- ODE Solver
  This section is found within 'Main Code - Stability.py' (inside 'find_pitch_for_length' function).
  It uses 'scipy.itegrate.solve_ivp' with 'method='RK45''.
  The ODE itself is defined inside 'Stability.py'.

- Regression / Interpolation
  - Interpolation: 
    This section is found in within 'Main_Power_Analysis.py) file. Lines 40-95
    It uses 'tck = interpolate.splrep(...)' to find the spline interpolation for the data points found from the NREL 5MW turbine, 
    This then allows us to find the curve for power generation for a standard wind turbine then use a factor to find power generation for different blade lengths 

  - Interpolation 2 (minor): We use a minor interpolation in 'Hydrodynamics.py' (Lines 42-57)
    using the one dimensional linear interpolation 'numpy.interp' to determine the Hydrostatic stiffness (k_h) for varying blade lengths.
